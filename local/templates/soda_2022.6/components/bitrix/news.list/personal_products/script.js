(function(t){function e(e){for(var s,o,i=e[0],c=e[1],u=e[2],l=0,p=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s,r=a("2b0e"),n=a("bc3a"),o=a.n(n),i=o.a.create({baseURL:"https://spartak.ru/api/",headers:{"Authorization-Token":"b977f556-5443436b-99fe3642-37c055f5"}}),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("section",{staticClass:"product-new"},[a("search-form"),a("products-list")],1)])},u=[],d=a("1da1"),l=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-nav"},[a("form",{staticClass:"search-form form",attrs:{method:"get",name:"search-product-by-name-article"}},[a("div",{staticClass:"field"},[a("input",{attrs:{type:"hidden",name:"is_owner"},domProps:{value:t.owner}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"field-style",attrs:{type:"text",placeholder:" ",name:"search_field",id:"search_field",maxlength:""},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),a("label",{staticClass:"placeholder",attrs:{for:"search_field"}},[t._v("Название или артикул")])]),a("input",{staticClass:"send-search",attrs:{name:"send-search",value:"",type:"submit"},on:{click:t.searchProduct}})]),a("div",{staticClass:"add-product"},[a("a",{attrs:{href:t.productAdd}},[t._v("Добавить товар")])])])}),p=[],h={name:"SearchForm",data:function(){return{query:""}},computed:{isManage:function(){return this.$store.state.manage},owner:function(){return this.isManage?"N":"Y"},productAdd:function(){return this.isManage?"/personal/products/add/":"/manage/products/add/"},domain:function(){return this.$store.state.domain}},methods:{searchProduct:function(t){var e=this;t&&t.preventDefault(),waitCheck(),this.$http.post(this.domain+"/include/ajax_manage.php",{search_field:this.query,is_owner:this.owner}).then((function(t){e.$store.dispatch("setProducts",t.data.items),e.$store.dispatch("setPage",t.data.page),waitCheck("close")}),(function(t){console.log(t)}))}}},f=h,m=a("0c7c"),v=Object(m["a"])(f,l,p,!1,null,null,null),g=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"basket-table"},[t._m(0),a("tbody",{attrs:{id:"product_list"}},t._l(t.products,(function(e){return a("tr",{key:e.id,staticClass:"item-row"},[a("td",{staticClass:"image"},[a("a",{staticClass:"image hover",style:t.getPreviewThumb(e.preview_photo),attrs:{href:t.productEditLink(e.id),target:"_blank"}})]),a("td",{staticClass:"desc"},[a("div",{staticClass:"name"},[a("a",{staticClass:"hover",attrs:{href:t.productEditLink(e.id)}},[t._v(t._s(e.name))])]),a("div",{staticClass:"props"},[a("div",{staticClass:"prop"},[t._v(t._s(e.colors))]),a("div",{staticClass:"prop"},[t._v(t._s(e.sizes))])])]),a("td",[t._v("239")]),a("td",[t._v(t._s(e.article))]),a("td",{staticClass:"control"},[a("a",{staticClass:"delete hover delete-product",attrs:{"data-entity":"basket-item-delete","data-product-id":e.id}},[a("img",{attrs:{src:t.domain+"/local/templates/sodamoda/images/icons/times.svg"}})])])])})),0)])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"head"},[a("th",{staticClass:"image"},[t._v("Товар")]),a("th",{staticClass:"desc"},[t._v("Название")]),a("th",{staticClass:"count"},[t._v("Продано")]),a("th",{staticClass:"summa"},[t._v("Артикул")]),a("th",{staticClass:"control"},[t._v("Удалить")])])])}],y={name:"ProductsList",computed:{isManage:function(){return this.$store.state.manage},owner:function(){return this.isManage?"N":"Y"},products:function(){return this.$store.state.products},domain:function(){return this.$store.state.domain}},methods:{getPreviewThumb:function(t){return t?{backgroundImage:"url("+this.domain+t+")"}:{}},productEditLink:function(t){return this.$store.state.domain+this.isManage?"/personal/products/edit/"+t+"/":"/manage/products/edit/"+t+"/"},deleteProduct:function(t){confirm("Вы уверены, что хотите удалить этот товар?")&&this.$http.post(this.$store.state.domain+"/include/ajax_delete_product.php",{product_id:t,site_id:this.$store.state.site_id}).then((function(){}),(function(t){console.log(t)}))}}},w=y,C=Object(m["a"])(w,_,b,!1,null,"45eac90f",null),P=C.exports,$={name:"App",components:{SearchForm:g,ProductsList:P},methods:{loadDevInit:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.$store.state.domain+"/include/ajax_manage.php?PAGEN_1=1").then((function(e){t.$store.dispatch("setProducts",e.data.items),t.$store.dispatch("setPage",e.data.page)}),(function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}},beforeMount:function(){0}},k=$,x=Object(m["a"])(k,c,u,!1,null,null,null),j=x.exports,O=a("2f62");r["a"].use(O["a"]),s={products:result.items,page:result.page,manage:result.owner,domain:result.domain,site_id:result.site_id};var M=new O["a"].Store({state:s,mutations:{set:function(t,e){var a=e.type,s=e.items;t[a]=s}},actions:{setProducts:function(t,e){var a=t.commit;a("set",{type:"products",items:e})},setPage:function(t,e){var a=t.commit;a("set",{type:"page",items:e})}}});r["a"].prototype.$http=i,r["a"].config.productionTip=!1,new r["a"]({store:M,http:{options:{emulateJSON:!0,emulateHTTP:!0}},render:function(t){return t(j)}}).$mount("#app")}});
//# sourceMappingURL=app.562cc813.js.map